<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend Test Login Page</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Login Page</h1>
    <form action="http://localhost:3000/auth/login" method="post">
        <h1>Username:</h1>
        <input type="text" name="username" required />

        <h1>Password:</h1>
        <input type="password" name="password" required />

        <input type="submit" value="Login" />
    </form>

    <p>Sign up if you don't have an account <a href="signup.html">Sign Up</a> </p>
</body>

<script>
    // document.getElementById('loginForm').addEventListener('submit', function (event) {
    //     event.preventDefault(); // Prevent default form submission

    //     const formData = {
    //         username: this.username.value,
    //         password: this.password.value
    //     };

    //     fetch('/login', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json',
    //         },
    //         body: JSON.stringify(formData),
    //     })
    //         .then(response => response.json())
    //         .then(data => {
    //             if (data.success) {
    //                 // Redirect to the main page
    //                 window.location.href = '/main.html';
    //             } else {
    //                 // Handle login failure (e.g., show an error message)
    //                 console.error('Login failed:', data.errorMessage);
    //             }
    //         })
    //         .catch((error) => {
    //             console.error('Error:', error);
    //         });
    // });


    document.getElementById('loginForm').addEventListener('submit', async function (event) {
        event.preventDefault(); // Prevent default form submission

        const formData = {
            username: this.username.value,
            password: this.password.value
        };

        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            });

            const data = await response.json(); // Parse the JSON response

            if (data.success) {
                // Redirect to the main page
                window.location.href = '/main.html';
            } else {
                // Handle login failure (e.g., show an error message)
                console.error('Login failed:', data.errorMessage);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    });

</script>